(window.webpackJsonp=window.webpackJsonp||[]).push([[0],[,,,,,,,,,function(t){t.exports={Iphone:{templateImagePath:"./assets/iphone_1.png",targetCoordinates:[[219,261],[375,219],[478,501],[317,552]]},Iphone_2:{templateImagePath:"./assets/iphone_2.jpg",targetCoordinates:[[383,234],[519,211],[580,445],[441,473]]}}},function(t,e,a){t.exports=a.p+"static/media/iphone_1.85eec3f8.png"},function(t,e,a){t.exports=a.p+"static/media/iphone_2.a2651bc3.jpg"},function(t,e,a){t.exports=a(20)},,,,,,function(t,e,a){},function(t,e,a){},function(t,e,a){"use strict";a.r(e);var n=a(0),i=a.n(n),o=a(8),r=a.n(o),s=(a(18),a(2)),c=a(1),h=a(5),l=a(4),m=a(3),p=a(6),g=function(){function t(e,a,n){Object(s.a)(this,t),this.bgImage=n,this.ctxd=e.getContext("2d"),this.cvso=document.createElement("canvas"),this.cvso.width=parseInt(a.width),this.cvso.height=parseInt(a.height),this.ctxo=this.cvso.getContext("2d"),this.ctxo.drawImage(a,0,0,this.cvso.width,this.cvso.height);var i=document.createElement("canvas");i.width=this.ctxd.canvas.width,i.height=this.ctxd.canvas.height,this.ctxt=i.getContext("2d")}return Object(c.a)(t,[{key:"draw",value:function(t){for(var e=t[0][0],a=t[0][1],n=t[1][0],i=t[1][1],o=t[2][0],r=t[2][1],s=t[3][0],c=t[3][1],h=[Math.sqrt(Math.pow(e-n,2)+Math.pow(a-i,2)),Math.sqrt(Math.pow(n-o,2)+Math.pow(i-r,2)),Math.sqrt(Math.pow(o-s,2)+Math.pow(r-c,2)),Math.sqrt(Math.pow(s-e,2)+Math.pow(c-a,2))],l=this.cvso.width,m=this.cvso.height,p=0,g=0,d=0,u=0;u<4;u++){var v=0;(v=u%2?h[u]/l:h[u]/m)>g&&(p=u,g=v),0==h[u]&&d++}if(!(d>1)){var f=this.ctxo,w=this.ctxt;if(w.clearRect(0,0,w.canvas.width,w.canvas.height),p%2==0){(M=this.create_canvas_context(l,10)).globalCompositeOperation="copy";for(var b=M.canvas,I=0;I<m;I+=2){var O=e+(s-e)*(C=I/m),x=a+(c-a)*C,_=n+(o-n)*C,j=i+(r-i)*C,y=Math.atan((j-x)/(_-O)),E=Math.sqrt(Math.pow(_-O,2)+Math.pow(j-x,2))/l;M.setTransform(1,0,0,1,0,-I),M.drawImage(f.canvas,0,0),w.translate(O,x),w.rotate(y),w.scale(E,E),w.drawImage(b,0,0),w.setTransform(1,0,0,1,0,0)}}else if(p%2==1){var M;(M=this.create_canvas_context(10,m)).globalCompositeOperation="copy";b=M.canvas;for(var k=0;k<l;k+=2){var C;O=e+(n-e)*(C=k/l),x=a+(i-a)*C,_=s+(o-s)*C,j=c+(r-c)*C,y=Math.atan((O-_)/(j-x)),E=Math.sqrt(Math.pow(_-O,2)+Math.pow(j-x,2))/m;M.setTransform(1,0,0,1,-k,0),M.drawImage(f.canvas,0,0),w.translate(O,x),w.rotate(y),w.scale(E,E),w.drawImage(b,0,0),w.setTransform(1,0,0,1,0,0)}}this.ctxd.drawImage(this.bgImage,0,0),this.ctxd.save(),this.ctxd.imageSmoothingEnabled=!0,this.ctxd.drawImage(w.canvas,0,0),this.ctxd.restore()}}},{key:"create_canvas_context",value:function(t,e){var a=document.createElement("canvas");return a.width=t,a.height=e,a.getContext("2d")}},{key:"_applyMask",value:function(t,e){t.beginPath(),t.moveTo(e[0][0],e[0][1]);for(var a=1;a<e.length;a++)t.lineTo(e[a][0],e[a][1]);t.closePath(),t.globalCompositeOperation="destination-in",t.fill(),t.globalCompositeOperation="source-over"}}]),t}(),d=a(9),u=a(10),v=a.n(u),f=a(11),w=a.n(f),b=function(){function t(){Object(s.a)(this,t)}return Object(c.a)(t,[{key:"image",value:function(t){switch(t){case"./assets/iphone_1.png":return v.a;case"./assets/iphone_2.jpg":return w.a;default:throw new Error("Image path invalid: ".concat(t))}}}]),t}(),I=function(){function t(e){Object(s.a)(this,t),this.imageLoader=new b,this._template=d[e]}return Object(c.a)(t,[{key:"imagePath",get:function(){return this._template.templateImagePath}},{key:"image",get:function(){return this.imageLoader.image(this._template.templateImagePath)}},{key:"targetCoordinates",get:function(){return this._template.targetCoordinates}}]),Object(c.a)(t,[{key:"toString",value:function(){return"ImagePath: ".concat(this.imagePath,"\nCoordinates: ").concat(JSON.stringify(this.targetCoordinates))}}],[{key:"IPHONE_1",get:function(){return new t("Iphone")}},{key:"IPHONE_2",get:function(){return new t("Iphone_2")}}]),t}(),O=function(t){function e(){return Object(s.a)(this,e),Object(h.a)(this,Object(l.a)(e).apply(this,arguments))}return Object(p.a)(e,t),Object(c.a)(e,[{key:"componentDidMount",value:function(){var t=this,e=this.refs.canvas,a=new Image,n=new Image,i=this.props.template;n.onload=function(){a.src=t.props.image},a.onload=function(){e.width=n.width,e.height=n.height,new g(e,a,n).draw(i.targetCoordinates)},n.src=i.image}},{key:"render",value:function(){return i.a.createElement("div",null,i.a.createElement("canvas",{ref:"canvas"}))}}]),e}(i.a.Component),x=(a(19),function(t){function e(t){var a;return Object(s.a)(this,e),(a=Object(h.a)(this,Object(l.a)(e).call(this,t))).state={},a.imageSelected=a.imageSelected.bind(Object(m.a)(a)),a}return Object(p.a)(e,t),Object(c.a)(e,[{key:"imageSelected",value:function(t){var e={image:URL.createObjectURL(t.target.files[0])};switch(this.refs.templateSelector.selectedIndex){case 0:e.template=I.IPHONE_1;break;case 1:e.template=I.IPHONE_2}this.setState(e)}},{key:"render",value:function(){var t=this.state.image;return t?i.a.createElement("div",{className:"App"},i.a.createElement("header",{className:"App-header"},i.a.createElement(O,{image:t,template:this.state.template}))):i.a.createElement("div",{className:"App"},i.a.createElement("header",{className:"App-header"},i.a.createElement("select",{name:"templates",ref:"templateSelector"},i.a.createElement("option",{value:"iphone1"},"iPhone Template 1"),i.a.createElement("option",{value:"iphone2"},"iPhone Template 2")),i.a.createElement("input",{type:"file",onChange:this.imageSelected,accept:"image/*"})))}}]),e}(i.a.Component));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(i.a.createElement(x,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(t){t.unregister()})}],[[12,1,2]]]);
//# sourceMappingURL=main.7871fd1a.chunk.js.map